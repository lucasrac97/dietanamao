<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Chat com IA via Chat Trigger</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; display: flex; justify-content: center; padding: 20px; }
    #chat-container { background: white; padding: 20px; border-radius: 10px; width: 100%; max-width: 600px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    #mensagens { max-height: 400px; overflow-y: auto; margin-bottom: 20px; }
    .mensagem { margin: 10px 0; }
    .usuario { color: blue; }
    .ia { color: green; }
    input { width: 75%; padding: 10px; }
    button { padding: 10px; background: blue; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="mensagens"></div>
    <input type="text" id="entrada" placeholder="Digite sua pergunta..." />
    <button onclick="enviarMensagem()">Enviar</button>
  </div>

  <script>
    const webhookURL = "https://lucasrac97.app.n8n.cloud/webhook/e54b7115-7f50-4718-b4f6-96f6d2810606/chat"; // Altere para o seu Chat Trigger

    async function enviarMensagem() {
      const entrada = document.getElementById("entrada");
      const mensagens = document.getElementById("mensagens");
      const texto = entrada.value.trim();
      if (!texto) return;

      mensagens.innerHTML += `<div class="mensagem usuario"><strong>VocÃª:</strong> ${texto}</div>`;
      entrada.value = "";

      try {
        const resposta = await fetch(webhookURL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: texto })
        });

        const dados = await resposta.json();
        const respostaIA = dados.message || "Sem resposta da IA.";

        mensagens.innerHTML += `<div class="mensagem ia"><strong>IA:</strong> ${respostaIA}</div>`;
        mensagens.scrollTop = mensagens.scrollHeight;
      } catch (erro) {
        mensagens.innerHTML += `<div class="mensagem ia">Erro ao conectar ao agente.</div>`;
        console.error("Erro:", erro);
      }
    }
  </script>
</body>
</html>
